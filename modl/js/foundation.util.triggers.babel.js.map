{"version":3,"sources":["foundation/foundation.util.triggers.js"],"names":[],"mappings":"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","file":"foundation.util.triggers.babel.js","sourcesContent":["'use strict';\n\n!function($) {\n\nconst MutationObserver = (function () {\n  var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n  for (var i=0; i < prefixes.length; i++) {\n    if (`${prefixes[i]}MutationObserver` in window) {\n      return window[`${prefixes[i]}MutationObserver`];\n    }\n  }\n  return false;\n}());\n\nconst triggers = (el, type) => {\n  el.data(type).split(' ').forEach(id => {\n    $(`#${id}`)[ type === 'close' ? 'trigger' : 'triggerHandler'](`${type}.zf.trigger`, [el]);\n  });\n};\n// Elements with [data-open] will reveal a plugin that supports it when clicked.\n$(document).on('click.zf.trigger', '[data-open]', function() {\n  triggers($(this), 'open');\n});\n\n// Elements with [data-close] will close a plugin that supports it when clicked.\n// If used without a value on [data-close], the event will bubble, allowing it to close a parent component.\n$(document).on('click.zf.trigger', '[data-close]', function() {\n  let id = $(this).data('close');\n  if (id) {\n    triggers($(this), 'close');\n  }\n  else {\n    $(this).trigger('close.zf.trigger');\n  }\n});\n\n// Elements with [data-toggle] will toggle a plugin that supports it when clicked.\n$(document).on('click.zf.trigger', '[data-toggle]', function() {\n  triggers($(this), 'toggle');\n});\n\n// Elements with [data-closable] will respond to close.zf.trigger events.\n$(document).on('close.zf.trigger', '[data-closable]', function(e){\n  e.stopPropagation();\n  let animation = $(this).data('closable');\n\n  if(animation !== ''){\n    Foundation.Motion.animateOut($(this), animation, function() {\n      $(this).trigger('closed.zf');\n    });\n  }else{\n    $(this).fadeOut().trigger('closed.zf');\n  }\n});\n\n$(document).on('focus.zf.trigger blur.zf.trigger', '[data-toggle-focus]', function() {\n  let id = $(this).data('toggle-focus');\n  $(`#${id}`).triggerHandler('toggle.zf.trigger', [$(this)]);\n});\n\n/**\n* Fires once after all other scripts have loaded\n* @function\n* @private\n*/\n$(window).load(() => {\n  checkListeners();\n});\n\nfunction checkListeners() {\n  eventsListener();\n  resizeListener();\n  scrollListener();\n  closemeListener();\n}\n\n//******** only fires this function once on load, if there's something to watch ********\nfunction closemeListener(pluginName) {\n  var yetiBoxes = $('[data-yeti-box]'),\n      plugNames = ['dropdown', 'tooltip', 'reveal'];\n\n  if(pluginName){\n    if(typeof pluginName === 'string'){\n      plugNames.push(pluginName);\n    }else if(typeof pluginName === 'object' && typeof pluginName[0] === 'string'){\n      plugNames.concat(pluginName);\n    }else{\n      console.error('Plugin names must be strings');\n    }\n  }\n  if(yetiBoxes.length){\n    let listeners = plugNames.map((name) => {\n      return `closeme.zf.${name}`;\n    }).join(' ');\n\n    $(window).off(listeners).on(listeners, function(e, pluginId){\n      let plugin = e.namespace.split('.')[0];\n      let plugins = $(`[data-${plugin}]`).not(`[data-yeti-box=\"${pluginId}\"]`);\n\n      plugins.each(function(){\n        let _this = $(this);\n\n        _this.triggerHandler('close.zf.trigger', [_this]);\n      });\n    });\n  }\n}\n\nfunction resizeListener(debounce){\n  let timer,\n      $nodes = $('[data-resize]');\n  if($nodes.length){\n    $(window).off('resize.zf.trigger')\n    .on('resize.zf.trigger', function(e) {\n      if (timer) { clearTimeout(timer); }\n\n      timer = setTimeout(function(){\n\n        if(!MutationObserver){//fallback for IE 9\n          $nodes.each(function(){\n            $(this).triggerHandler('resizeme.zf.trigger');\n          });\n        }\n        //trigger all listening elements and signal a resize event\n        $nodes.attr('data-events', \"resize\");\n      }, debounce || 10);//default time to emit resize event\n    });\n  }\n}\n\nfunction scrollListener(debounce){\n  let timer,\n      $nodes = $('[data-scroll]');\n  if($nodes.length){\n    $(window).off('scroll.zf.trigger')\n    .on('scroll.zf.trigger', function(e){\n      if(timer){ clearTimeout(timer); }\n\n      timer = setTimeout(function(){\n\n        if(!MutationObserver){//fallback for IE 9\n          $nodes.each(function(){\n            $(this).triggerHandler('scrollme.zf.trigger');\n          });\n        }\n        //trigger all listening elements and signal a scroll event\n        $nodes.attr('data-events', \"scroll\");\n      }, debounce || 10);//default time to emit scroll event\n    });\n  }\n}\n\nfunction eventsListener() {\n  if(!MutationObserver){ return false; }\n  let nodes = document.querySelectorAll('[data-resize], [data-scroll], [data-mutate]');\n\n  //element callback\n  var listeningElementsMutation = function(mutationRecordsList) {\n    var $target = $(mutationRecordsList[0].target);\n    //trigger the event handler for the element depending on type\n    switch ($target.attr(\"data-events\")) {\n\n      case \"resize\" :\n      $target.triggerHandler('resizeme.zf.trigger', [$target]);\n      break;\n\n      case \"scroll\" :\n      $target.triggerHandler('scrollme.zf.trigger', [$target, window.pageYOffset]);\n      break;\n\n      // case \"mutate\" :\n      // console.log('mutate', $target);\n      // $target.triggerHandler('mutate.zf.trigger');\n      //\n      // //make sure we don't get stuck in an infinite loop from sloppy codeing\n      // if ($target.index('[data-mutate]') == $(\"[data-mutate]\").length-1) {\n      //   domMutationObserver();\n      // }\n      // break;\n\n      default :\n      return false;\n      //nothing\n    }\n  }\n\n  if(nodes.length){\n    //for each element that needs to listen for resizing, scrolling, (or coming soon mutation) add a single observer\n    for (var i = 0; i <= nodes.length-1; i++) {\n      let elementObserver = new MutationObserver(listeningElementsMutation);\n      elementObserver.observe(nodes[i], { attributes: true, childList: false, characterData: false, subtree:false, attributeFilter:[\"data-events\"]});\n    }\n  }\n}\n\n// ------------------------------------\n\n// [PH]\n// Foundation.CheckWatchers = checkWatchers;\nFoundation.IHearYou = checkListeners;\n// Foundation.ISeeYou = scrollListener;\n// Foundation.IFeelYou = closemeListener;\n\n}(jQuery);\n\n// function domMutationObserver(debounce) {\n//   // !!! This is coming soon and needs more work; not active  !!! //\n//   var timer,\n//   nodes = document.querySelectorAll('[data-mutate]');\n//   //\n//   if (nodes.length) {\n//     // var MutationObserver = (function () {\n//     //   var prefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n//     //   for (var i=0; i < prefixes.length; i++) {\n//     //     if (prefixes[i] + 'MutationObserver' in window) {\n//     //       return window[prefixes[i] + 'MutationObserver'];\n//     //     }\n//     //   }\n//     //   return false;\n//     // }());\n//\n//\n//     //for the body, we need to listen for all changes effecting the style and class attributes\n//     var bodyObserver = new MutationObserver(bodyMutation);\n//     bodyObserver.observe(document.body, { attributes: true, childList: true, characterData: false, subtree:true, attributeFilter:[\"style\", \"class\"]});\n//\n//\n//     //body callback\n//     function bodyMutation(mutate) {\n//       //trigger all listening elements and signal a mutation event\n//       if (timer) { clearTimeout(timer); }\n//\n//       timer = setTimeout(function() {\n//         bodyObserver.disconnect();\n//         $('[data-mutate]').attr('data-events',\"mutate\");\n//       }, debounce || 150);\n//     }\n//   }\n// }\n"]}